# =============================================================================
# Django Project Tracking Management System - Environment Configuration
# Windows/WAMP Version
# =============================================================================
# 
# Copy this file to .env and update the values according to your setup.
# DO NOT commit .env to version control!
#
# =============================================================================

# ---------------------------------------------------------------------------
# Environment Settings
# ---------------------------------------------------------------------------
DJANGO_ENV=development
DEBUG=True
SECRET_KEY=your-secret-key-here-change-in-production
ALLOWED_HOSTS=localhost,127.0.0.1

# ---------------------------------------------------------------------------
# Database Configuration (MySQL 8.0 for WAMP)
# ---------------------------------------------------------------------------
# For WAMP setup:
# 1. Start WAMP Server (make sure MySQL is running - icon should be green)
# 2. Create database using one of these methods:
#    - Via phpMyAdmin: http://localhost/phpmyadmin → New → project_tracking
#    - Via MySQL CLI: mysql -u root -p < scripts/setup_database.sql
#
DB_NAME=project_tracking
DB_USER=ptms_user
DB_PASSWORD=ptms_password
DB_HOST=localhost
DB_PORT=3306
DB_CHARSET=utf8mb4

# Alternative: Use root user (not recommended for production)
# DB_USER=root
# DB_PASSWORD=your_mysql_root_password

# ---------------------------------------------------------------------------
# Cache & Session Configuration (Redis)
# ---------------------------------------------------------------------------
# Redis is optional but recommended for:
# - Session caching
# - API response caching
# - WebSocket support
# - Celery task queue
#
# For WAMP setup without Redis, the system will use Django's default cache.
# To install Redis on Windows:
#   1. Download from: https://github.com/microsoftarchive/redis/releases
#   2. Or use WSL: sudo apt install redis-server
#
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Session settings
# If Redis is NOT available, change to: django.contrib.sessions.backends.db
SESSION_ENGINE=django.contrib.sessions.backends.cache
SESSION_CACHE_ALIAS=default
SESSION_COOKIE_AGE=1800
SESSION_COOKIE_SECURE=False
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# ---------------------------------------------------------------------------
# Celery Configuration (Requires Redis)
# ---------------------------------------------------------------------------
# Celery is used for background tasks like CSV imports.
# If Redis is not available, CSV imports will run synchronously.
#
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TIMEZONE=Asia/Manila
CELERY_ENABLE_UTC=True

# ---------------------------------------------------------------------------
# Email Configuration (for password reset)
# ---------------------------------------------------------------------------
# For development, emails are printed to console.
# For production, configure SMTP settings.
#
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@projecttracking.local

# ---------------------------------------------------------------------------
# File Upload Settings
# ---------------------------------------------------------------------------
# Media files are user uploads (CSV files, exports)
# Static files are CSS, JS, images
#
# Windows paths can use forward slashes (/) or escaped backslashes (\\)
MEDIA_ROOT=./media
MEDIA_URL=/media/
STATIC_ROOT=./staticfiles
STATIC_URL=/static/

# Maximum upload size (100MB)
DATA_UPLOAD_MAX_MEMORY_SIZE=104857600
FILE_UPLOAD_MAX_MEMORY_SIZE=104857600

# ---------------------------------------------------------------------------
# Security Settings
# ---------------------------------------------------------------------------
# For local development, these are relaxed.
# For production, set SECURE_SSL_REDIRECT=True and cookie flags to True.
#
CSRF_COOKIE_SECURE=False
CSRF_COOKIE_HTTPONLY=True
CSRF_COOKIE_SAMESITE=Lax
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
X_FRAME_OPTIONS=DENY

# ---------------------------------------------------------------------------
# CORS Settings
# ---------------------------------------------------------------------------
# Allow frontend to communicate with backend
# Vite dev server runs on port 3000 by default
#
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
CORS_ALLOW_CREDENTIALS=True

# ---------------------------------------------------------------------------
# Logging
# ---------------------------------------------------------------------------
LOG_LEVEL=DEBUG
LOG_FILE=./logs/django.log

# ---------------------------------------------------------------------------
# API Settings
# ---------------------------------------------------------------------------
API_VERSION=v1
API_RATE_LIMIT=100/hour
PAGE_SIZE=50
MAX_PAGE_SIZE=200

# =============================================================================
# WINDOWS/WAMP SPECIFIC NOTES
# =============================================================================
#
# 1. WAMP Server Setup:
#    - Install WAMP from: https://www.wampserver.com/
#    - Default MySQL port: 3306
#    - phpMyAdmin: http://localhost/phpmyadmin
#
# 2. MySQL Configuration:
#    - Edit my.ini in WAMP's MySQL directory if needed
#    - Ensure these settings for utf8mb4 support:
#      [mysqld]
#      character-set-server=utf8mb4
#      collation-server=utf8mb4_unicode_ci
#
# 3. GDAL/GEOS for GeoDjango (Windows):
#    - Download OSGeo4W from: https://trac.osgeo.org/osgeo4w/
#    - Or download wheels from: https://www.lfd.uci.edu/~gohlke/pythonlibs/
#    - Set GDAL_LIBRARY_PATH and GEOS_LIBRARY_PATH in .env if needed:
#      GDAL_LIBRARY_PATH=C:/OSGeo4W/bin/gdal309.dll
#      GEOS_LIBRARY_PATH=C:/OSGeo4W/bin/geos_c.dll
#
# 4. Common Issues:
#    - "Access denied for user": Check MySQL user credentials
#    - "Unknown database": Create database first using setup script
#    - "Can't connect to MySQL": Ensure WAMP MySQL service is running
#    - "ModuleNotFoundError: No module named '_sqlite3'": Use MySQL, not SQLite
#
# 5. Useful MySQL Commands:
#    mysql -u root -p                          # Login as root
#    SHOW DATABASES;                           # List databases
#    USE project_tracking;                     # Select database
#    SHOW TABLES;                              # List tables
#    SELECT user, host FROM mysql.user;        # List users
#
# =============================================================================
